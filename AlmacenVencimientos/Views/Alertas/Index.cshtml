@model AlmacenVencimientos.Models.AlertasViewModel

@{
    ViewData["Title"] = "Alertas de Inventario";
}

<h1>Alertas de Inventario</h1>

<p>
    <strong>Días de aviso por vencimiento:</strong> @Model.DiasAvisoVencimiento<br />
    <strong>Stock mínimo:</strong> @Model.StockMinimo unidades
</p>

<hr />

<h2>Lotes vencidos</h2>

@if (!Model.LotesVencidos.Any())
{
    <p class="text-success">No hay lotes vencidos con existencia.</p>
}
else
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Código Lote</th>
                <th>Fecha Vencimiento</th>
                <th>Cantidad Actual</th>
                <th>Ubicación</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.LotesVencidos)
            {
                <tr class="table-danger">
                    <td>@item.Producto?.Nombre</td>
                    <td>@item.CodigoLote</td>
                    <td>@item.FechaVencimiento.ToString("dd/MM/yyyy")</td>
                    <td>@item.CantidadActual</td>
                    <td>@item.Ubicacion</td>
                </tr>
            }
        </tbody>
    </table>
}

<hr />

<h2>Lotes próximos a vencer (próximos @Model.DiasAvisoVencimiento días)</h2>

@if (!Model.LotesPorVencer.Any())
{
    <p class="text-success">No hay lotes próximos a vencer dentro del rango configurado.</p>
}
else
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Código Lote</th>
                <th>Fecha Vencimiento</th>
                <th>Cantidad Actual</th>
                <th>Ubicación</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.LotesPorVencer)
            {
                <tr class="table-warning">
                    <td>@item.Producto?.Nombre</td>
                    <td>@item.CodigoLote</td>
                    <td>@item.FechaVencimiento.ToString("dd/MM/yyyy")</td>
                    <td>@item.CantidadActual</td>
                    <td>@item.Ubicacion</td>
                </tr>
            }
        </tbody>
    </table>
}

<hr />

<h2>Lotes con stock bajo (≤ @Model.StockMinimo)</h2>

@if (!Model.LotesStockBajo.Any())
{
    <p class="text-success">No hay lotes con stock bajo.</p>
}
else
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Código Lote</th>
                <th>Fecha Vencimiento</th>
                <th>Cantidad Actual</th>
                <th>Ubicación</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.LotesStockBajo)
            {
                <tr class="table-info">
                    <td>@item.Producto?.Nombre</td>
                    <td>@item.CodigoLote</td>
                    <td>@item.FechaVencimiento.ToString("dd/MM/yyyy")</td>
                    <td>@item.CantidadActual</td>
                    <td>@item.Ubicacion</td>
                </tr>
            }
        </tbody>
    </table>
}
